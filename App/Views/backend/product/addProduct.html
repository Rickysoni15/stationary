{% extends "backend/partition/layout.html" %}


{% block body %}
<style>
    .switch_vendorGst {
        position: relative;
        display: inline-block;
        width: 47px;
        height: 24px;
        margin-bottom: 0 !important;
        margin-left: 10px;
    }

    .switch_vendorGst input {
        opacity: 0;
        width: 0;
        height: 0;
    }

    .slider_vendorGst {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        -webkit-transition: .4s;
        transition: .4s;
    }

    .slider_vendorGst:before {
        position: absolute;
        content: "";
        height: 15px;
        width: 15px;
        left: 3px;
        bottom: 4px;
        background-color: white;
        -webkit-transition: .4s;
        transition: .4s;
    }

    input:checked+.slider_vendorGst {
        background-color: #3c8dbc;
        ;
    }

    input:focus+.slider_vendorGst {
        box-shadow: 0 0 1px #3c8dbc;
        ;
    }

    input:checked+.slider_vendorGst:before {
        -webkit-transform: translateX(26px);
        -ms-transform: translateX(26px);
        transform: translateX(26px);
    }

    /* Rounded sliders */
    .slider_vendorGst.round {
        border-radius: 34px;
    }

    .slider_vendorGst.round:before {
        border-radius: 50%;
    }

    select:required:invalid {
        color: gray;
    }

    option[value=""][disabled] {
        display: none;
    }

    option {
        color: black;
    }

    .select2-container--default .select2-selection--multiple .select2-selection__choice {
        background-color: #e4e4e4;
        border: 1px solid #aaa;
        border-radius: 4px;
        cursor: default;
        float: left;
        margin-right: 5px;
        margin-top: 5px;
        padding: 0 5px;
        color: black;
    }


    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    /* Firefox */
    input[type=number] {
        -moz-appearance: textfield;
    }
</style>
<!-- Main Content
<div class="page-wrapper">
	<div class="container-fluid">

		Title -->
<section class="content-header">
    <h1>Product</h1>
    <!-- Breadcrumb -->
    <ol class="breadcrumb">
        <li><a href="/"><i class="fa fa-dashboard"></i> Dashboard</a></li>
        <li class="active">Product</li>
    </ol>
    <!-- /Breadcrumb -->
</section>
<!-- /Title -->
{% include "backend/partition/notification.html" %}
<!-- Row -->
<section class="content">
    <div class="row">
        <div class="col-sm-12">
            <div class="panel panel-default card-view">
                <div class="panel-heading">

                    <!-- <div class="pull-right">
                        <a href="/backend/list_Attribute"><button type="button" class="btn btn-primary btn-md"><i class="fa fa-plus"></i> Add Attribute</button></a>
                    </div> -->
                    <div class="clearfix"></div>
                </div>
                <div class="panel-wrapper collapse in">
                    <div class="panel-body">
                        <div class="table-wrap">
                            <div class="table-responsive">
                                {% if productData %}
                                <form method="POST" action="/backend/productEdit/{{productData._id}}"
                                    class="form-horizontal" enctype="multipart/form-data">
                                    {% else %}
                                    <form id="formdata" method="POST" action="/backend/addProduct"
                                        class="form-horizontal" enctype="multipart/form-data">
                                        {% endif %}
                                        <div class="box box-info" style="border-top-color: #3c8dbc;">
                                            <div class="box-header with-border" style="background-color: #3c8dbc;">
                                                <h3 class="box-title" style="color: white;">Basic Details</h3>
                                                <div class="box-tools pull-right">
                                                    <button type="button" class="btn btn-box-tool"
                                                        data-widget="collapse"><i class="fa fa-minus"
                                                            style="color: white;"></i>
                                                    </button>
                                                </div>
                                            </div>

                                            <div class="box-body">
                                                <table border="0" class="table display  pb-30">
                                                    <div class="col-sm-12">
                                                        <div class="panel-wrapper collapse in">
                                                            <div class="panel-body">
                                                                <div class="form-group">

                                                                    <label class="switch control-label mb-10 col-sm-2"
                                                                        for="product_Visibility">Enable Product:</label>
                                                                    <div class="col-sm-6">

                                                                        <label class="switch_vendorGst">
                                                                            <input name="product_Visibility"
                                                                                class="gstSwitch" type="checkbox"
                                                                                id="switchVal2" data-id="checkone"
                                                                                value="{{productData.product_visibility}}"
                                                                                {% if
                                                                                productData.product_visibility=="1" %}
                                                                                checked {% endif %}>
                                                                            <span class="slider_vendorGst round"></span>
                                                                        </label>

                                                                    </div>


                                                                </div>


                                                                <div class="form-group">
                                                                    <label class="control-label mb-10 col-sm-2"
                                                                        for="product_name">Product Name:&nbsp; <span
                                                                            class="text-danger">*</span></label>
                                                                    <div class="col-sm-6">
                                                                        <!-- [^/,]+] -->
                                                                        <input type="text" class="form-control"
                                                                            name="product_name" id="product_name"
                                                                            value="{{productData.product_name}}" pattern="[^/,]+" title="'Slash' is not allowed"
                                                                            required />
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label class="control-label mb-10 col-sm-2"
                                                                        for="product_sku">SKU:</label>
                                                                    <div class="col-sm-6">
                                                                        <input type="text" class="form-control"
                                                                            name="product_sku" id="product_sku"
                                                                            value="{{productData.product_sku}}" />
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">

                                                                    <input type="hidden" id="actual_price"
                                                                        value="{{productData.product_price}}">
                                                                    <label class="control-label mb-10 col-sm-2"
                                                                        for="product_price">Price:&nbsp; <span
                                                                            class="text-danger">*</span></label>
                                                                    <div class="col-sm-6">
                                                                        <input type="number" class="form-control"
                                                                            pattern="[0-9]+([\,|\.][0-9]+)?" step="0.01"
                                                                            name="product_price" id="product_price"
                                                                            value="" required />
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label class="control-label mb-10 col-sm-2"
                                                                        for="hsn_code">HSN Code: &nbsp; <span
                                                                            class="text-danger">*</span></label>
                                                                    <div class="col-sm-6">
                                                                        <input type="text" class="form-control"
                                                                            name="hsn_code" id="hsn_code"
                                                                            value="{{productData.hsn_code}}" required />
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label class="control-label mb-10 col-sm-2"
                                                                        for="gst_percentage">GST Percentage:</label>

                                                                    <div class="col-sm-3">

                                                                        {% if productData.GST_rate %}
                                                                        <input type="text" class="form-control"
                                                                            name="gst_percentage" id="gst_percentage"
                                                                            maxlength="2"
                                                                            value="{{productData.GST_rate}}" />

                                                                        {% else %}

                                                                        <input type="text" class="form-control"
                                                                            name="gst_percentage" id="gst_percentage"
                                                                            value="18" />
                                                                        {% endif %}
                                                                    </div>

                                                                    <label class="control-label mb-10 col-sm-2"
                                                                        style="text-align: left;">%</label>
                                                                </div>

                                                                <!-- <div class="form-group">
                                                                    <label class="control-label mb-10 col-sm-2"
                                                                        for="tax_class">Tax Class:</label>
                                                                    <div class="col-sm-6">
                                                                        <select id="tax_class" name="tax_class">
                                                                            <option value="">Please Select</option>
                                                                            {% if tax_class %}
                                                                            {% for item in tax_class %}
                                                                            {% if item.is_deleted == "0" and
                                                                            item.account_id == App.account_id %}
                                                                            <option value="{{item.name}}" {% if
                                                                                item.name==productData.tax_class %}
                                                                                selected {% endif %}>{{item.name}}
                                                                            </option>
                                                                            {% endif %}
                                                                            {% endfor %}
                                                                            {% endif %}
                                                                        </select>
                                                                    </div>
                                                                </div> -->

                                                                <div class="form-group">
                                                                    <label class="control-label mb-10 col-sm-2"
                                                                        for="product_quantity">Quantity:</label>
                                                                    <div class="col-sm-6">
                                                                        <input type="number" class="form-control"
                                                                            name="product_quantity"
                                                                            id="product_quantity"
                                                                            value="{{productData.product_stock_quantity}}"
                                                                            required />
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label class="control-label mb-10 col-sm-2"
                                                                        for="stock_status">Stock Status:</label>
                                                                    <div class="col-sm-6">
                                                                        <select id="stock_status" name="stock_status">
                                                                            <option value="">Please Select</option>
                                                                            <option value="In Stock" {% if
                                                                                productData.product_stock_status=="In Stock"
                                                                                %} selected {% endif %}>In Stock
                                                                            </option>
                                                                            <option value="Out Of Stock" {% if
                                                                                productData.product_stock_status=="Out Of Stock"
                                                                                %} selected {% endif %}>Out Of Stock
                                                                            </option>
                                                                        </select>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label class="control-label mb-10 col-sm-2"
                                                                        for="product_weight">Weight:</label>
                                                                    <div class="col-sm-6">
                                                                        <input type="text" class="form-control"
                                                                            name="product_weight" id="product_weight"
                                                                            value="{{productData.product_weight}}"
                                                                            placeholder="kgs" />
                                                                        <select id="weight_type" name="weight_type"
                                                                            style="margin-top: 5px;">
                                                                            <option value="">Please Select</option>
                                                                            <option value="true" {% if
                                                                                productData.weight_type=="true" %}
                                                                                selected {% endif %}>This item has no
                                                                                weight
                                                                            </option>
                                                                            <option value="false" {% if
                                                                                productData.weight_type=="false" %}
                                                                                selected {% endif %}>This item has
                                                                                weight
                                                                            </option>
                                                                        </select>
                                                                    </div>
                                                                </div>
                                                                <div class="form-group">
                                                                    <input type="hidden" value="{{finalCategory}}"
                                                                        id="finalCategory">
                                                                    <label class="control-label mb-10 col-sm-2"
                                                                        for="product_category">Category:</label>
                                                                    <div class="col-sm-6">
                                                                        <select id="product_category"
                                                                            name="product_category"
                                                                            class="form-control select2 select2-hidden-accessible js-example-basic-multiple" 
                                                                            data-placeholder="Select a Category"
                                                                            multiple=""
                                                                            style="width: 100%;" data-select2-id="7"
                                                                            tabindex="-1" aria-hidden="true">
                                                                            {% if productCategoryData %}
                                                                            {% for item in productCategoryData %}
                                                                            {% if item.main_productId == null and
                                                                            item.main_sub_productId == null %}
                                                                        <optgroup label="{{item.productCategoryName}}">
                                                                           
                                                                            {% endif %}
                                                                            {% if item.subproduct %}
                                                                            {% for itemsub in item.subproduct %}
                                                                            {% if itemsub.account_id == App.account_id
                                                                            and itemsub.main_sub_productId == null %}

                                                                            <option value="{{itemsub.itemname}}">
                                                                                {{itemsub.name}}
                                                                            </option>
                                                                            {% endif %}
                                                                            {% if itemsub.subof_subproduct %}

                                                                            {% for itemsubofsub in
                                                                            itemsub.subof_subproduct %}

                                                                            {% if itemsubofsub.account_id ==
                                                                            App.account_id and
                                                                            itemsubofsub.main_productId != null and
                                                                            itemsubofsub.main_sub_productId != null%}

                                                                            <option value="{{itemsubofsub.itemname}}">
                                                                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{itemsubofsub.name}}
                                                                            </option>
                                                                        </optgroup>
                                                                            {% endif %}
                                                                            {% endfor %}
                                                                            {% endif %}

                                                                            {% endfor %}
                                                                            {% endif %}


                                                                            {% endfor %}
                                                                            {% endif %}
                                                                        </select>
                                                                    </div>
                                                                </div>

                                                                <!-- <div class="form-group">
                                                                    <label class="control-label mb-10 col-sm-2"
                                                                        for="product_featured">Featured:</label>
                                                                    <div class="col-sm-6">
                                                                        <select id="product_featured"
                                                                            name="product_featured">
                                                                            <option value="">Please Select</option>
                                                                            <option value="true" {% if
                                                                                productData.product_featured=="true" %}
                                                                                selected {% endif %}>Yes</option>
                                                                            <option value="false" {% if
                                                                                productData.product_featured=="false" %}
                                                                                selected {% endif %}>No</option>
                                                                        </select>
                                                                    </div>
                                                                </div> -->

                                                                <!-- <div class="form-group">
                                                                    <h1>{{color.name}}</h1>
                                                                    <label class="control-label mb-10 col-sm-2"
                                                                        for="product_color">Color:</label>

                                                                    <div class="col-sm-6">



                                                                        <select id="product_color" name="product_color">
                                                                            <option value="">Please Select</option>
                                                                            {% if color %}
                                                                            {% for item in color %}
                                                                            {% if item.is_deleted == "0" and
                                                                            item.account_id == App.account_id %}

                                                                            <option value="{{item.name}}" {% if
                                                                                item.name==productData.product_color %}
                                                                                selected {% endif %}>{{item.name}}
                                                                            </option>
                                                                            {% endif %}
                                                                            {% endfor %}
                                                                            {% endif %}
                                                                        </select>
                                                                    </div>
                                                                </div>

                                                                <div class="form-group">
                                                                    <label class="control-label mb-10 col-sm-2"
                                                                        for="product_size">Size:</label>
                                                                    <div class="col-sm-6">
                                                                        <select id="product_size" name="product_size">
                                                                            <option value="">Please Select</option>
                                                                            {% if size %}
                                                                            {% for item in size %}
                                                                            {% if item.is_deleted == "0" and
                                                                            item.account_id == App.account_id %}
                                                                            <option value="{{item.name}}" {% if
                                                                                item.name==productData.product_size %}
                                                                                selected {% endif %}>{{item.name}}
                                                                            </option>
                                                                            {% endif %}
                                                                            {% endfor %}
                                                                            {% endif %}
                                                                        </select>
                                                                    </div>
                                                                </div> -->

                                                                <div class="form-group">
                                                                    <label class="control-label mb-10 col-sm-2"
                                                                        for="product_image"> Default Product Images
                                                                        : &nbsp; <span
                                                                            class="text-danger">*</span></label>
                                                                    <div class="col-sm-6">
                                                                        {% if productData %}
                                                                        <input type="hidden" id="productdeleteId"
                                                                            value="{{productData._id}}">

                                                                        <div class="upload__box">
                                                                            <input type="file"
                                                                                class="form-control close_defaultImg "
                                                                                id="productImageDef"
                                                                                name="productImageDef" value=""
                                                                                data-max_length="20" accept="image/*">
                                                                            <div id="imgs1"></div>
                                                                            <!-- <div id="imgs1" style="width:200px; height:200px; margin-right:3px;">
                                                                                    <span class="img_"  style="cursor:pointer; margin-right: 3px ;font-size: 30px;position: absolute;right: 245px;color: red ;">
                                                                                    </span>
                                                                                    
                                                                                </div> -->
                                                                        </div>
                                                                        <input type="hidden" name="files_selected"
                                                                            id="files_selected" />



                                                                        {% for img in productData.product_defaultImg
                                                                        %}

                                                                        {% if (img.is_deleted == "0") %}
                                                                        <div class="containerdiv_img">
                                                                            <input type="hidden" name="productImgIdd"
                                                                                id="productImgIdd" value="{{img._id}}">



                                                                            <img id="proimage" class="upload__img-wrap"
                                                                                src="{{img.path}}" height="200px"
                                                                                width="200px" alt="">
                                                                        </div>


                                                                        {% endif %}
                                                                        {% endfor %}
                                                                        {% else %}
                                                                        <input type="file" class="form-control"
                                                                            id="productImageDef" accept="image/*"
                                                                            name="productImageDef" value="" required>
                                                                        <div id="imgs1"></div>


                                                                        {% endif %}

                                                                        <span class="text-danger">Please upload
                                                                            image minimum size 550*550 px.</span>

                                                                    </div>
                                                                </div>

                                                            </div>

                                                            <div class="form-group">
                                                                <label class="control-label mb-10 col-sm-2"
                                                                    for="product_image">Product Images And
                                                                    Videos:</label>
                                                                <div class="col-sm-6">
                                                                    {% if product %}
                                                                    <input type="hidden" id="productdeleteid"
                                                                        value="{{productData._id}}">

                                                                    <div class="upload__box">
                                                                        <input type="file" class="form-control"
                                                                            id="productImage" name="productImage"
                                                                            multiple value="" data-max_length="20"
                                                                            accept="video/*,image/*">
                                                                        <div id="imgs"></div>
                                                                        <input type="hidden" name="files_selected"
                                                                            id="files_selected" />
                                                                        <!-- <div class="img_preview">
                                                                                        <img id="prev1" src="">
                                                                                    </div> -->
                                                                        {% set i = 0 %}

                                                                        {% for image in productData.product_image %}
                                                                        {% set i = i+1 %}
                                                                        {% if (image.is_deleted == "0") %}
                                                                        <div class="containerdiv_img">
                                                                            <!-- <input type="hidden" id="productImgId"
                                                                                    value="{{image._id}}"> -->

                                                                            <!-- <img id="proimage{{i}}"
                                                                                    class="upload__img-wrap"
                                                                                    src="{{image.path}}" height="200px"
                                                                                    width="200px" alt="">
                                                                                <span id="cls{{i}} "
                                                                                    class="close_img"><b>X</b></span> -->
                                                                            <!-- <p>{{image.type}}</p> -->

                                                                            {% if (image.type == "video") %}

                                                                            <video id="videoId{{i}}"
                                                                                class="upload__img-wrap" width="200"
                                                                                height="200" controls>
                                                                                <source src="{{image.path}}">
                                                                            </video>
                                                                            <span id="cls{{i}} " class="close_img"
                                                                                data-iid="{{image._id}}"><b>X</b></span>
                                                                            {% else %}
                                                                            <img id="proimage{{i}}"
                                                                                class="upload__img-wrap"
                                                                                src="{{image.path}}" height="200px"
                                                                                width="200px" alt="">
                                                                            <span id="cls{{i}} " class="close_img"
                                                                                data-iid="{{image._id}}"><b>X</b></span>

                                                                            {% endif %}


                                                                        </div>


                                                                        {% endif %}
                                                                        {% endfor %}
                                                                        {% else %}
                                                                        <input type="file" class="form-control"
                                                                            id="productImage" required multiple
                                                                            name="productImage" value=""
                                                                            accept="video/*,image/*">

                                                                        {% endif %}
                                                                        <span class="text-danger">Please upload
                                                                            image minimum size 550*550 px.</span>

                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <label class="control-label mb-10 col-sm-2"
                                                                    for="product_description">Product
                                                                    Description:</label>
                                                                <div class="col-sm-6">
                                                                    <textarea class="form-control"
                                                                        name="product_description"
                                                                        id="product_description" rows="9" maxlength="50"
                                                                        style="resize:none;  width: 386px; height: 202px;">{{productData.product_description}}</textarea>
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <label class="control-label mb-10 col-sm-2"
                                                                    for="product_newform"> Set Product as New
                                                                    From:</label>
                                                                <div class="col-sm-6">
                                                                    <div class="col-lg-5">
                                                                        <input type="date" class="form-control"
                                                                            name="product_startDate"
                                                                            id="product_startDate"
                                                                            value="{{productData.product_startdate}}" />
                                                                    </div>
                                                                    <div class="col-lg-2">

                                                                        <h4>To</h4>

                                                                    </div>
                                                                    <div class="col-lg-5">
                                                                        <input type="date" class="form-control"
                                                                            name="product_endDate" id="product_endDate"
                                                                            value="{{productData.product_enddate}}" />
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <input type="hidden" id="product__country"
                                                                    value="{{productData.product_country_manufacture}}">
                                                                <label class="control-label mb-10 col-sm-2"
                                                                    for="product_country"> Country of
                                                                    Manufacture:</label>
                                                                <div class="col-sm-6 " id="selection">
                                                                    <select id="product_country" name="product_country">
                                                                        <option value="">Please Select</option>
                                                                        <option value="Afghanistan">Afghanistan
                                                                        </option>
                                                                        <option value="Albania">Albania</option>
                                                                        <option value="Algeria">Algeria</option>
                                                                        <option value="American Samoa">American
                                                                            Samoa</option>
                                                                        <option value="Andorra">Andorra</option>
                                                                        <option value="Angola">Angola</option>
                                                                        <option value="Anguilla">Anguilla</option>
                                                                        <option value="Antartica">Antarctica
                                                                        </option>
                                                                        <option value="Antigua and Barbuda">Antigua
                                                                            and Barbuda</option>
                                                                        <option value="Argentina">Argentina</option>
                                                                        <option value="Armenia">Armenia</option>
                                                                        <option value="Aruba">Aruba</option>
                                                                        <option value="Australia">Australia</option>
                                                                        <option value="Austria">Austria</option>
                                                                        <option value="Azerbaijan">Azerbaijan
                                                                        </option>
                                                                        <option value="Bahamas">Bahamas</option>
                                                                        <option value="Bahrain">Bahrain</option>
                                                                        <option value="Bangladesh">Bangladesh
                                                                        </option>
                                                                        <option value="Barbados">Barbados</option>
                                                                        <option value="Belarus">Belarus</option>
                                                                        <option value="Belgium">Belgium</option>
                                                                        <option value="Belize">Belize</option>
                                                                        <option value="Benin">Benin</option>
                                                                        <option value="Bermuda">Bermuda</option>
                                                                        <option value="Bhutan">Bhutan</option>
                                                                        <option value="Bolivia">Bolivia</option>
                                                                        <option value="Bosnia and Herzegowina">
                                                                            Bosnia and Herzegowina</option>
                                                                        <option value="Botswana">Botswana</option>
                                                                        <option value="Bouvet Island">Bouvet Island
                                                                        </option>
                                                                        <option value="Brazil">Brazil</option>
                                                                        <option value="British Indian Ocean Territory">
                                                                            British Indian Ocean Territory</option>
                                                                        <option value="Brunei Darussalam">Brunei
                                                                            Darussalam</option>
                                                                        <option value="Bulgaria">Bulgaria</option>
                                                                        <option value="Burkina Faso">Burkina Faso
                                                                        </option>
                                                                        <option value="Burundi">Burundi</option>
                                                                        <option value="Cambodia">Cambodia</option>
                                                                        <option value="Cameroon">Cameroon</option>
                                                                        <option value="Canada">Canada</option>
                                                                        <option value="Cape Verde">Cape Verde
                                                                        </option>
                                                                        <option value="Cayman Islands">Cayman
                                                                            Islands</option>
                                                                        <option value="Central African Republic">
                                                                            Central African Republic</option>
                                                                        <option value="Chad">Chad</option>
                                                                        <option value="Chile">Chile</option>
                                                                        <option value="China">China</option>
                                                                        <option value="Christmas Island">Christmas
                                                                            Island</option>
                                                                        <option value="Cocos Islands">Cocos
                                                                            (Keeling) Islands</option>
                                                                        <option value="Colombia">Colombia</option>
                                                                        <option value="Comoros">Comoros</option>
                                                                        <option value="Congo">Congo</option>
                                                                        <option value="Congo">Congo, the Democratic
                                                                            Republic of the</option>
                                                                        <option value="Cook Islands">Cook Islands
                                                                        </option>
                                                                        <option value="Costa Rica">Costa Rica
                                                                        </option>
                                                                        <option value="Cota D'Ivoire">Cote d'Ivoire
                                                                        </option>
                                                                        <option value="Croatia">Croatia (Hrvatska)
                                                                        </option>
                                                                        <option value="Cuba">Cuba</option>
                                                                        <option value="Cyprus">Cyprus</option>
                                                                        <option value="Czech Republic">Czech
                                                                            Republic</option>
                                                                        <option value="Denmark">Denmark</option>
                                                                        <option value="Djibouti">Djibouti</option>
                                                                        <option value="Dominica">Dominica</option>
                                                                        <option value="Dominican Republic">Dominican
                                                                            Republic</option>
                                                                        <option value="East Timor">East Timor
                                                                        </option>
                                                                        <option value="Ecuador">Ecuador</option>
                                                                        <option value="Egypt">Egypt</option>
                                                                        <option value="El Salvador">El Salvador
                                                                        </option>
                                                                        <option value="Equatorial Guinea">Equatorial
                                                                            Guinea</option>
                                                                        <option value="Eritrea">Eritrea</option>
                                                                        <option value="Estonia">Estonia</option>
                                                                        <option value="Ethiopia">Ethiopia</option>
                                                                        <option value="Falkland Islands">Falkland
                                                                            Islands (Malvinas)</option>
                                                                        <option value="Faroe Islands">Faroe Islands
                                                                        </option>
                                                                        <option value="Fiji">Fiji</option>
                                                                        <option value="Finland">Finland</option>
                                                                        <option value="France">France</option>
                                                                        <option value="France Metropolitan">France,
                                                                            Metropolitan</option>
                                                                        <option value="French Guiana">French Guiana
                                                                        </option>
                                                                        <option value="French Polynesia">French
                                                                            Polynesia</option>
                                                                        <option value="French Southern Territories">
                                                                            French Southern Territories</option>
                                                                        <option value="Gabon">Gabon</option>
                                                                        <option value="Gambia">Gambia</option>
                                                                        <option value="Georgia">Georgia</option>
                                                                        <option value="Germany">Germany</option>
                                                                        <option value="Ghana">Ghana</option>
                                                                        <option value="Gibraltar">Gibraltar</option>
                                                                        <option value="Greece">Greece</option>
                                                                        <option value="Greenland">Greenland</option>
                                                                        <option value="Grenada">Grenada</option>
                                                                        <option value="Guadeloupe">Guadeloupe
                                                                        </option>
                                                                        <option value="Guam">Guam</option>
                                                                        <option value="Guatemala">Guatemala</option>
                                                                        <option value="Guinea">Guinea</option>
                                                                        <option value="Guinea-Bissau">Guinea-Bissau
                                                                        </option>
                                                                        <option value="Guyana">Guyana</option>
                                                                        <option value="Haiti">Haiti</option>
                                                                        <option value="Heard and McDonald Islands">
                                                                            Heard and Mc Donald Islands</option>
                                                                        <option value="Holy See">Holy See (Vatican
                                                                            City State)</option>
                                                                        <option value="Honduras">Honduras</option>
                                                                        <option value="Hong Kong">Hong Kong</option>
                                                                        <option value="Hungary">Hungary</option>
                                                                        <option value="Iceland">Iceland</option>
                                                                        <option value="India">India</option>
                                                                        <option value="Indonesia">Indonesia</option>
                                                                        <option value="Iran">Iran (Islamic Republic
                                                                            of)</option>
                                                                        <option value="Iraq">Iraq</option>
                                                                        <option value="Ireland">Ireland</option>
                                                                        <option value="Israel">Israel</option>
                                                                        <option value="Italy">Italy</option>
                                                                        <option value="Jamaica">Jamaica</option>
                                                                        <option value="Japan">Japan</option>
                                                                        <option value="Jordan">Jordan</option>
                                                                        <option value="Kazakhstan">Kazakhstan
                                                                        </option>
                                                                        <option value="Kenya">Kenya</option>
                                                                        <option value="Kiribati">Kiribati</option>
                                                                        <option
                                                                            value="Democratic People's Republic of Korea">
                                                                            Korea, Democratic People's Republic of
                                                                        </option>
                                                                        <option value="Korea">Korea, Republic of
                                                                        </option>
                                                                        <option value="Kuwait">Kuwait</option>
                                                                        <option value="Kyrgyzstan">Kyrgyzstan
                                                                        </option>
                                                                        <option value="Lao">Lao People's Democratic
                                                                            Republic</option>
                                                                        <option value="Latvia">Latvia</option>
                                                                        <option value="Lebanon">Lebanon</option>
                                                                        <option value="Lesotho">Lesotho</option>
                                                                        <option value="Liberia">Liberia</option>
                                                                        <option value="Libyan Arab Jamahiriya">
                                                                            Libyan Arab Jamahiriya</option>
                                                                        <option value="Liechtenstein">Liechtenstein
                                                                        </option>
                                                                        <option value="Lithuania">Lithuania</option>
                                                                        <option value="Luxembourg">Luxembourg
                                                                        </option>
                                                                        <option value="Macau">Macau</option>
                                                                        <option value="Macedonia">Macedonia, The
                                                                            Former Yugoslav Republic of</option>
                                                                        <option value="Madagascar">Madagascar
                                                                        </option>
                                                                        <option value="Malawi">Malawi</option>
                                                                        <option value="Malaysia">Malaysia</option>
                                                                        <option value="Maldives">Maldives</option>
                                                                        <option value="Mali">Mali</option>
                                                                        <option value="Malta">Malta</option>
                                                                        <option value="Marshall Islands">Marshall
                                                                            Islands</option>
                                                                        <option value="Martinique">Martinique
                                                                        </option>
                                                                        <option value="Mauritania">Mauritania
                                                                        </option>
                                                                        <option value="Mauritius">Mauritius</option>
                                                                        <option value="Mayotte">Mayotte</option>
                                                                        <option value="Mexico">Mexico</option>
                                                                        <option value="Micronesia">Micronesia,
                                                                            Federated States of</option>
                                                                        <option value="Moldova">Moldova, Republic of
                                                                        </option>
                                                                        <option value="Monaco">Monaco</option>
                                                                        <option value="Mongolia">Mongolia</option>
                                                                        <option value="Montserrat">Montserrat
                                                                        </option>
                                                                        <option value="Morocco">Morocco</option>
                                                                        <option value="Mozambique">Mozambique
                                                                        </option>
                                                                        <option value="Myanmar">Myanmar</option>
                                                                        <option value="Namibia">Namibia</option>
                                                                        <option value="Nauru">Nauru</option>
                                                                        <option value="Nepal">Nepal</option>
                                                                        <option value="Netherlands">Netherlands
                                                                        </option>
                                                                        <option value="Netherlands Antilles">
                                                                            Netherlands Antilles</option>
                                                                        <option value="New Caledonia">New Caledonia
                                                                        </option>
                                                                        <option value="New Zealand">New Zealand
                                                                        </option>
                                                                        <option value="Nicaragua">Nicaragua</option>
                                                                        <option value="Niger">Niger</option>
                                                                        <option value="Nigeria">Nigeria</option>
                                                                        <option value="Niue">Niue</option>
                                                                        <option value="Norfolk Island">Norfolk
                                                                            Island</option>
                                                                        <option value="Northern Mariana Islands">
                                                                            Northern Mariana Islands</option>
                                                                        <option value="Norway">Norway</option>
                                                                        <option value="Oman">Oman</option>
                                                                        <option value="Pakistan">Pakistan</option>
                                                                        <option value="Palau">Palau</option>
                                                                        <option value="Panama">Panama</option>
                                                                        <option value="Papua New Guinea">Papua New
                                                                            Guinea</option>
                                                                        <option value="Paraguay">Paraguay</option>
                                                                        <option value="Peru">Peru</option>
                                                                        <option value="Philippines">Philippines
                                                                        </option>
                                                                        <option value="Pitcairn">Pitcairn</option>
                                                                        <option value="Poland">Poland</option>
                                                                        <option value="Portugal">Portugal</option>
                                                                        <option value="Puerto Rico">Puerto Rico
                                                                        </option>
                                                                        <option value="Qatar">Qatar</option>
                                                                        <option value="Reunion">Reunion</option>
                                                                        <option value="Romania">Romania</option>
                                                                        <option value="Russia">Russian Federation
                                                                        </option>
                                                                        <option value="Rwanda">Rwanda</option>
                                                                        <option value="Saint Kitts and Nevis">Saint
                                                                            Kitts and Nevis</option>
                                                                        <option value="Saint LUCIA">Saint LUCIA
                                                                        </option>
                                                                        <option value="Saint Vincent">Saint Vincent
                                                                            and the Grenadines</option>
                                                                        <option value="Samoa">Samoa</option>
                                                                        <option value="San Marino">San Marino
                                                                        </option>
                                                                        <option value="Sao Tome and Principe">Sao
                                                                            Tome and Principe</option>
                                                                        <option value="Saudi Arabia">Saudi Arabia
                                                                        </option>
                                                                        <option value="Senegal">Senegal</option>
                                                                        <option value="Seychelles">Seychelles
                                                                        </option>
                                                                        <option value="Sierra">Sierra Leone</option>
                                                                        <option value="Singapore">Singapore</option>
                                                                        <option value="Slovakia">Slovakia (Slovak
                                                                            Republic)</option>
                                                                        <option value="Slovenia">Slovenia</option>
                                                                        <option value="Solomon Islands">Solomon
                                                                            Islands</option>
                                                                        <option value="Somalia">Somalia</option>
                                                                        <option value="South Africa">South Africa
                                                                        </option>
                                                                        <option value="South Georgia">South Georgia
                                                                            and the South Sandwich Islands</option>
                                                                        <option value="Span">Spain</option>
                                                                        <option value="SriLanka">Sri Lanka</option>
                                                                        <option value="St. Helena">St. Helena
                                                                        </option>
                                                                        <option value="St. Pierre and Miguelon">St.
                                                                            Pierre and Miquelon</option>
                                                                        <option value="Sudan">Sudan</option>
                                                                        <option value="Suriname">Suriname</option>
                                                                        <option value="Svalbard">Svalbard and Jan
                                                                            Mayen Islands</option>
                                                                        <option value="Swaziland">Swaziland</option>
                                                                        <option value="Sweden">Sweden</option>
                                                                        <option value="Switzerland">Switzerland
                                                                        </option>
                                                                        <option value="Syria">Syrian Arab Republic
                                                                        </option>
                                                                        <option value="Taiwan">Taiwan, Province of
                                                                            China</option>
                                                                        <option value="Tajikistan">Tajikistan
                                                                        </option>
                                                                        <option value="Tanzania">Tanzania, United
                                                                            Republic of</option>
                                                                        <option value="Thailand">Thailand</option>
                                                                        <option value="Togo">Togo</option>
                                                                        <option value="Tokelau">Tokelau</option>
                                                                        <option value="Tonga">Tonga</option>
                                                                        <option value="Trinidad and Tobago">Trinidad
                                                                            and Tobago</option>
                                                                        <option value="Tunisia">Tunisia</option>
                                                                        <option value="Turkey">Turkey</option>
                                                                        <option value="Turkmenistan">Turkmenistan
                                                                        </option>
                                                                        <option value="Turks and Caicos">Turks and
                                                                            Caicos Islands</option>
                                                                        <option value="Tuvalu">Tuvalu</option>
                                                                        <option value="Uganda">Uganda</option>
                                                                        <option value="Ukraine">Ukraine</option>
                                                                        <option value="United Arab Emirates">United
                                                                            Arab Emirates</option>
                                                                        <option value="United Kingdom">United
                                                                            Kingdom</option>
                                                                        <option value="United States">United States
                                                                        </option>
                                                                        <option
                                                                            value="United States Minor Outlying Islands">
                                                                            United States Minor Outlying Islands
                                                                        </option>
                                                                        <option value="Uruguay">Uruguay</option>
                                                                        <option value="Uzbekistan">Uzbekistan
                                                                        </option>
                                                                        <option value="Vanuatu">Vanuatu</option>
                                                                        <option value="Venezuela">Venezuela</option>
                                                                        <option value="Vietnam">Viet Nam</option>
                                                                        <option value="Virgin Islands (British)">
                                                                            Virgin Islands (British)</option>
                                                                        <option value="Virgin Islands (U.S)">Virgin
                                                                            Islands (U.S.)</option>
                                                                        <option value="Wallis and Futana Islands">
                                                                            Wallis and Futuna Islands</option>
                                                                        <option value="Western Sahara">Western
                                                                            Sahara</option>
                                                                        <option value="Yemen">Yemen</option>
                                                                        <option value="Serbia">Serbia</option>
                                                                        <option value="Zambia">Zambia</option>
                                                                        <option value="Zimbabwe">Zimbabwe</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <div class="col-sm-6">
                                                                    <input type="hidden" class="form-control"
                                                                        name="copy" id="copyText" value="">
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                            </div>
                                            <tr>
                                                <!-- <td colspan="2"></td> -->
                                            </tr>
                                            </table>
                                        </div>
                            </div>


                           

                           


                            <div class="box box-info collapsed-box" style="border-top-color: #3c8dbc;">
                                <div class="box-header with-border" style="background-color: #3c8dbc;">
                                    <h3 class="box-title" style="color: white;">Search Engine Optimization
                                    </h3>
                                    <div class="box-tools pull-right">
                                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i
                                                class="fa fa-plus" style="color: white;"></i>
                                        </button>
                                    </div>
                                </div>

                                <div class="box-body">
                                    <table border="0" class="table display  pb-30">
                                        <div class="col-sm-12">
                                            <div class="panel-wrapper collapse in">
                                                <div class="panel-body">


                                                    <div class="form-group">
                                                        <label class="control-label mb-10 col-sm-2" for="url_Key">URL
                                                            Key:</label>
                                                        <div class="col-sm-6">
                                                            <input type="text" class="form-control" name="url_Key"
                                                                id="url_Key" value="{{productData.product_url_Key}}" />
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="control-label mb-10 col-sm-2"
                                                            for="meta_Title">Meta Title:</label>
                                                        <div class="col-sm-6">
                                                            <input type="text" class="form-control" name="meta_Title"
                                                                id="meta_Title" value="{{productData.meta_Title}}" />
                                                        </div>
                                                    </div>



                                                    <div class="form-group">
                                                        <label class="control-label mb-10 col-sm-2"
                                                            for="meta_Keywords">Meta Keywords:</label>
                                                        <div class="col-sm-6">
                                                            <textarea class="form-control" name="meta_Keywords"
                                                                id="meta_Keywords" rows="9" maxlength="400"
                                                                style="resize:none; width: 386px; height: 202px;">{{productData.meta_Keywords}}</textarea>
                                                        </div>
                                                    </div>


                                                    <div class="form-group">
                                                        <label class="control-label mb-10 col-sm-2"
                                                            for="meta_Decription">Meta Description:</label>
                                                        <div class="col-sm-6">
                                                            <textarea class="form-control" name="meta_Decription"
                                                                id="meta_Decription" rows="9" maxlength="400"
                                                                style="resize:none; width: 386px; height: 202px;">{{productData.meta_Decription}}</textarea>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <div class="col-sm-6">
                                                            <input type="hidden" class="form-control" name="copy"
                                                                id="copyText" value="">
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <tr>
                                            <!-- <td colspan="2"></td> -->
                                        </tr>
                                    </table>
                                </div>
                            </div>



                           

                           

                            <div class="box box-info collapsed-box" style="border-top-color: #3c8dbc;">
                                <div class="box-header with-border" style="background-color: #3c8dbc;">
                                    <h3 class="box-title" style="color: white;">Apply For Discount
                                    </h3>
                                    <div class="box-tools pull-right">
                                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i
                                                class="fa fa-plus" style="color: white;"></i>
                                        </button>
                                    </div>
                                </div>

                                <div class="box-body">
                                    <table border="0" class="table display  pb-30">
                                        <div class="col-sm-12">
                                            <div class="panel-wrapper collapse in">
                                                <div class="panel-body">

                                                    <div class="form-group">

                                                        <label class="switch control-label mb-10 col-sm-2"
                                                            for="apply_discount">Apply For discount:</label>
                                                        <div class="col-sm-6">

                                                            <label class="switch_vendorGst">
                                                                <input name="apply_discount1" type="checkbox"
                                                                    id="apply_discount" data-iid1="checkone_discount"
                                                                    value="{{productData.is_discount}}" {% if
                                                                    productData.is_discount=="1" %} checked {% endif %}>
                                                                <span class="slider_vendorGst round"></span>
                                                            </label>

                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="control-label mb-10 col-sm-2"
                                                            for="selling_price">Selling Price:</label>
                                                        <div class="col-sm-6">
                                                            <input type="text" class="form-control" name="selling_price"
                                                                id="selling_price" value="{{productData.product_price}}"
                                                                readonly />
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label
                                                            class="control-label mb-10 col-sm-2 discount_value">Discount
                                                            Value:</label>
                                                        <div class="col-sm-6">
                                                            <input type="number" pattern="[0-9]+([\,|\.][0-9]+)?"
                                                                step="0.01" class="form-control" name="discount_value"
                                                                id="discount_value"
                                                                value="{{productData.discount_value}}" />
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="control-label mb-10 col-sm-2">Discount
                                                            Percentage:</label>
                                                        <div class="col-sm-6">
                                                            <input type="number" pattern="[0-9]+([\,|\.][0-9]+)?"
                                                                step="0.01" class="form-control"
                                                                name="discount_percentage" id="discount_percentage"
                                                                value="{{productData.discount_percentage}}" />
                                                        </div>
                                                    </div>


                                                    <div class="form-group">
                                                        <input type="hidden" id="actual_discount"
                                                            value="{{productData.discount_price}}">
                                                        <label class="control-label mb-10 col-sm-2"
                                                            for="discount_price">Discount Price:</label>
                                                        <div class="col-sm-6">
                                                            <input type="text" class="form-control"
                                                                name="discount_price" id="discount_price" value=""
                                                                readonly />
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="control-label mb-10 col-sm-2"
                                                            for="product_newform"> Set Discount
                                                            From:</label>
                                                        <div class="col-sm-6">
                                                            <div class="col-lg-5">
                                                                <input type="date" class="form-control"
                                                                    name="discount_startDate" id="discount_startDate"
                                                                    value="{{productData.discount_startDate}}" />
                                                            </div>
                                                            <div class="col-lg-2">

                                                                <h4>To</h4>

                                                            </div>
                                                            <div class="col-lg-5">
                                                                <input type="date" class="form-control"
                                                                    name="discount_endDate" id="discount_endDate"
                                                                    value="{{productData.discount_endDate}}" />
                                                            </div>
                                                        </div>
                                                    </div>


                                                    <div class="form-group">
                                                        <div class="col-sm-6">
                                                            <input type="hidden" class="form-control" name="copy"
                                                                id="copyText" value="">
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <tr>
                                            <!-- <td colspan="2"></td> -->
                                        </tr>
                                    </table>
                                </div>
                            </div>

                        </div>

                        {% if productData %}
                        <input type="submit" class="btn btn-success btn-flat" value="Update">
                        <a class="btn btn-danger btn-flat" href="/backend/product">Cancel</a>
                        {%else%}
                        <input id="submit" type="submit" class="btn btn-success btn-flat" value="submit">
                        <a class="btn btn-danger btn-flat" href="/backend/product">Cancel</a>
                        {% endif %}
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <!-- /Row -->
    </div>
</section>

{% endblock %}

{% block Jscript %}




<script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
    crossorigin="anonymous"></script>
<script>
    $(document).ready(function () {

        var attribute_set = $('#attribute_set').find(':selected').attr('data-id');
        $('#attribute_set_id').attr('value', attribute_set);
        $(".showdiv").each(function () {
            let match_id = $(this).attr('data-showid');
            if (attribute_set == match_id) {
                $(this).show();
            } else {
                $(this).hide();
            }
        });

        $('#attribute_set').change(function () {
            let attribute_len = $('#attribute_len').attr('value');
            // alert(attribute_len);
            let attribute_set = $(this).find(':selected').attr('data-id');
            $('#attribute_set_id').attr('value', attribute_set);
            $(".showdiv").each(function () {
                let match_id = $(this).attr('data-showid');
                if (attribute_set == match_id) {
                    $(this).show();
                } else {
                    $(this).hide();
                }
            });
        });

        $('.js-example-basic-multiple').select2();

        // $(".nicEdit-main").attr('maxlength', '50');

        $(".nicEdit-main").keyup(function () {
            var text = $(".nicEdit-main").text();
            var len = text.length;

            if (len > 350) {

                $(".nicEdit-main").text($(".nicEdit-main").text().substr(0, 349));
            }
        });



        // $(".nicEdit-main").text(function (index, currentText) {
        //     return currentText.substr(0, 90);
        // });


        $("input[name='product_quantity']").on('input', function (e) {
            $(this).val($(this).val().replace(/[^0-9]/g, ''));
        });

    });
</script>

<script>
    $(document).ready(function () {
        $('.pdfclick').click(function () {
            let mkarr = [];

            let valpdf = $(this).attr('data-id');
            mkarr.push(valpdf)
            $('<input>').attr({
                type: 'hidden',
                id: 'foo',
                name: 'pdfadd',
                value: mkarr
            }).appendTo('form');
        });

        // $('.close_defaultImg').click(function () {
        //     // let mkarr = [];

        //     let valpdf = $(this).attr('data-iddd');
        //     mkarr.push(valpdf)
        //     $('<input>').attr({
        //         type: 'hidden',
        //         id: 'foo',
        //         name: 'pdfadd',
        //         value: valpdf
        //     }).appendTo('form');
        // });
    });
</script>



<script>
    var intWorkProcessTextBox = 0;

    var fileCount = 0;

    function addWorkProcess() {
        intWorkProcessTextBox++;
        var objNewDiv = document.createElement('div');
        objNewDiv.setAttribute('id', 'div_' + intWorkProcessTextBox);


        //by kiran sir
        var textArea = document.createElement('textarea')
        textArea.setAttribute('id', 'description_');
        textArea.setAttribute('name', 'description');
        textArea.setAttribute('rows', '10');
        textArea.setAttribute('cols', '70');

        // textArea.setAttribute('style','resize:none;')


        objNewDiv.innerHTML = '<div class="form-group">\
								<div class="form-group">\
									<label class="control-label mb-10 col-sm-2" for="heading" id="heading">Heading:</label>\
									<div class="col-sm-6">\
										<input type="text" class="form-control" name="heading" id="heading"/>\
									</div>\
									<div class="col-sm-1">\
										<div class="" style="float: right;">\
											<i class="fa fa-trash fa-2x removeAddressTextaready_'+ intWorkProcessTextBox + '"  ></i> </div>\
										</div>\
									</div>\
								</div>\
									<div class="form-group">\
										<label class="control-label mb-10 col-sm-2" for="description" id="description">Description:</label>\
										<div class="col-sm-6"  id="_new_textArea_div_'+ intWorkProcessTextBox + '">\
									</div>\
								</div>'

        document.getElementById('moreWorkProcess').appendChild(objNewDiv);
        document.getElementById("_new_textArea_div_" + intWorkProcessTextBox).appendChild(textArea);

        new nicEditor().panelInstance(textArea);
        // var edit_content = $('#formdata').find('.nicEdit-main').html();
        // console.log("edit_content",edit_content);				
        $('.removeAddressTextaready_' + intWorkProcessTextBox).click(function () {
            // $(this).hide();
            let parent = $(this).parent().parent().parent().parent().parent().html('');
        });


    }

    // $(".chosen-select").chosen({
    //     no_results_text: "Oops, nothing found!"
    // });
    // $('.chosen-select').change(function(){
    //     var aaa = $("#DB").val(); // get option value
    //     if(aaa === '') {
    //     // user select empty item
    //     console.log("Oops, nothing found!");
    //     }
    //     else{
    //     // user select valid item
    //     console.log(aaa);
    //     }
    // });

    $('.removeAddressTextarea').click(function () {
        // $(this).hide();
        let parent = $(this).parent().parent().parent().parent().html('');
        console.log("parent", parent);
    });


    $('.removePdf').click(function () {
        var host = window.location.origin;

        let id = $(this).attr('id'); //product's id


        let _id = $(this).attr('name'); //pdf's id
        var thisElement = this;

        // let parent = $(this).parent().parent().parent().html('');


        $.ajax({
            type: 'POST',
            url: host + "/backend/pdfDelete",
            data: { id: id, _id: _id },
            success: function (resultData) {

                // alert(data);
                if (resultData == 'success') {
                    $(thisElement).parent().parent().parent().hide();

                } else {
                    alert("Something went wrong")
                }
                // alert("Save Complete")
            }
        });


    });

    function del(index) {
        $(document).on('click', ('.img_' + index), function () {

            var pips = $('.img_' + index).toArray();
            var $selectedPip = $(this).parent('.img_' + index);
            var index1 = pips.indexOf($selectedPip[0]);

            var dt = new DataTransfer();
            var files = $("#productImage")[0].files;

            console.log("files", dt);

            for (var fileIdx = 0; fileIdx < files.length; fileIdx++) {
                if (fileIdx !== index1) {
                    dt.items.add(files[fileIdx]);
                }
            }

            $("#productImage")[0].files = dt.files;

            $('div.img_' + index).remove();

        });

        updateFiles();
    }



    function updateFiles() {
        var fileIndexes = $('#imgs > div').map(function () {
            return $(this).data('index');

        }).get().join(",");

        // alert(fileIndexes)

        $('#files_selected').val(fileIndexes);
    }


    window.URL = window.URL || window.webkitURL;
    var elBrowse = document.getElementById("productImageDef"),
        elPreview = document.getElementById("imgs1"),
        prImg = document.getElementById("productImage"),
        prPreview = document.getElementById("imgs"),



        // useBlob   = false && window.URL; 
        flag = false;

    function readImage(file) {
        var reader = new FileReader();
        reader.addEventListener("load", function () {
            let image = new Image();
            image.addEventListener("load", function () {
                if (image.width < parseInt(400) && image.height < parseInt(400)) {
                    alert("This image is not valid")
                    flag = true;
                    elBrowse.value = null;
                }
                $('.removeimg').fadeIn();
                if (flag == false) {
                    elPreview.innerHTML = '<span class="img_"  style="cursor:pointer; margin-right: 3px ;font-size: 30px;position: absolute;right: 245px;color: red ;"></span>';
                    var t = window.URL || window.webkitURL;
                    var objectUrl = t.createObjectURL(file);
                    elPreview.appendChild(this);
                    var styleset = elPreview.getElementsByTagName('img')[0];
                    styleset.setAttribute("style", "height:200px; width:200px;");

                }
            });
            image.src = reader.result;
        });
        reader.readAsDataURL(file);
    }




    elBrowse.addEventListener("change", function () {
        flag = false;
        var files = this.files;
        $('#imgs1').empty();
        var errors = "";
        if (!files) {
            errors += "File upload not supported by your browser.";
        }
        if (files && files[0]) {
            for (var i = 0; i < files.length; i++) {
                var file = files[i];
                readImage(file);
                //   var t = window.URL || window.webkitURL;
                //   var objectUrl = t.createObjectURL(files[i]);
                // $('.removeimg').fadeIn();

                // $('#imgs1').append('<div ><span class="img_"  style="cursor:pointer; margin-right: 3px ;font-size: 30px;position: absolute;right: 245px;color: red ;"></span><img  src="' + objectUrl + '" width="200px" height="200px" style="margin-right: 3px;"></div>');

            }
            updateFiles();
        }
        if (errors) {
            alert(errors);
        }
    });




    // $(document).ready(function () {
    //     $("#productImage").change(function () {
    //         for (var i = 0; i < $("#productImage").get(0).files.length; ++i) {
    //             var file1 = $("#productImage").get(0).files[i].name;

    //             if (file1) {
    //                 var file_size = $("#productImage").get(0).files[i];

    //                 console.log("file_size --->>>",file_size.width);
    //                 if (file_size > 302500) {
    //                     $('#imgs').empty();

    //                 } else {
    //                     alert("Screenshot size is too large.");
    //                     return false;
    //                 }
    //             } else {
    //                 alert("fill all fields..");
    //                 return false;
    //             }
    //         }
    //     });

    // });













    // function fileImage(file) {
    //     var reader1 = new FileReader();
    //     console.log("this.files --->>", file);

    //     reader1.onload =  function () {
    //         let image = new Image();

    //         image.onload = function () {
    //             if (image.width < parseInt(550) && image.height < parseInt(550)) {
    //                 alert("This image is not valid")
    //                 flag = true;
    //                 prImg.value = null;
    //                 $('#imgs').empty();

    //             }
    //             $('.removeimg').fadeIn();
    //             if (flag == false) {
    //                 prPreview.innerHTML = '<span class="img_"  style="cursor:pointer; margin-right: 3px ;font-size: 30px;position: absolute;right: 245px;color: red ;"></span>';
    //                 var t = window.URL || window.webkitURL;
    //                 var objectUrl = t.createObjectURL(file);
    //                 prPreview.appendChild(this);
    //                 var styleset = prPreview.getElementsByTagName('img')[0];
    //                 styleset.setAttribute("style", "height:200px; width:200px;");

    //             }
    //         };
    //         image.src = reader1.result;
    //     };
    //     reader1.readAsDataURL(file);
    // }

    // prImg.addEventListener("change", function () {
    //     flag = false;
    //     var files1 = this.files;
    //     $('#imgs').empty();
    //     var errors = "";
    //     if (!files1) {
    //         errors += "File upload not supported by your browser.";
    //     }
    //     if (files1 && files1[0]) {
    //         for (var i = 0; i < files1.length; i++) {
    //             var file = files1[i];
    //             fileImage(file);
    //             //   var t = window.URL || window.webkitURL;
    //             //   var objectUrl = t.createObjectURL(files[i]);
    //             // $('.removeimg').fadeIn();

    //             // $('#imgs1').append('<div ><span class="img_"  style="cursor:pointer; margin-right: 3px ;font-size: 30px;position: absolute;right: 245px;color: red ;"></span><img  src="' + objectUrl + '" width="200px" height="200px" style="margin-right: 3px;"></div>');

    //         }
    //         updateFiles();
    //     }
    //     if (errors) {
    //         alert(errors);
    //     }
    // });

    $("#productImage").on('change', function () {
        var fileList = this.files;
        $('#imgs').empty();
        for (var i = 0; i < fileList.length; i++) {
            var t = window.URL || window.webkitURL;
            var objectUrl = t.createObjectURL(fileList[i]);
            // console.log("objectUrl", fileList[i].type);
            $('.removeimg').fadeIn();
            let type = fileList[i].type;
            if (type == "image/jpeg" || type == "image/png" || type == "image/jpg" || type == "image/gif") {
                $('#imgs').append('<div data-index="' + i + '" class="img_' + i + '"><span class="img_' + i + '" onclick="del(' + i + ')" style="cursor:pointer; margin-right: 3px ;font-size: 30px;position: absolute;right: 245px;color: red ;"><b>x</b></span><img class="img_' + i + '" src="' + objectUrl + '" width="200px" height="200px" style="margin-right: 3px;"></div>');
                j = i + 1;
            } else {
                $('#imgs').append('<div data-index="' + i + '" class="img_' + i + '"><span class="img_' + i + '" onclick="del(' + i + ')" style="cursor:pointer; margin-right: 3px ;font-size: 30px;position: absolute;right: 245px;color: red ; z-index :555;"><b>x</b></span><video width="200" height="200"  style="margin-right: 3px;" controls> <source src=" ' + objectUrl + ' " ></video></div>');
                j = i + 1;
            }
            // if (j % 2 == 0) {
            // 	$('#imgs').append('<br>');
            // }
        }
        updateFiles();
    });


    // });


    // function del(index) {
    // 	alert('yes its')
    // 	$('img_preview.prev1' + index).remove();
    // 	preview_image();
    // }

    // function preview_image() {
    // 	var modalImg = document.getElementsByClassName("img_preview");
    // 	var total_file = document.getElementById("productImage").files;
    // 	// alert(total_file)
    // 	for (var i = 0; i < total_file.length; i++) {
    // 		var pathpreview = URL.createObjectURL(total_file[i]);
    // 		// alert(pathpreview)													
    // 		let demo = URL.createObjectURL(total_file[i])

    // 		let appendstring = '<img class="prev1" src="'+demo+'" ><span class="close1" onclick="del(' + i + ')" style="cursor:pointer; margin-right: 3px;"><b>x</b></span>'

    // 		$('.img_preview').append(appendstring);		

    // 		// $('.img_preview').append("<img class='prev1' src='" + URL.createObjectURL(total_file[i]) + "'><span class='close1'>&times;</span>");
    // 		// $('#prev1').attr('src',pathpreview)	;    	
    // 	}
    // }


    $(document).ready(function () {
        var host = window.location.origin;
        $(function () {
            "use strict";
            var SweetAlert = function () { };

            SweetAlert.prototype.init = function () {

                //Parameter
                $('body').on('click', '.close_img', function (e) {
                    var deleteid = $(this).attr("data-iid");
                    var id = $('#productdeleteid').val();

                    var thisElement = this;
                    swal({
                        title: "Are you sure?",
                        text: "You will not be able to recover this Project!",
                        type: "warning",
                        showCancelButton: true,
                        confirmButtonColor: "#e69a2a",
                        confirmButtonText: "Yes, delete it!",
                        cancelButtonText: "No, cancel plx!",
                        closeOnConfirm: false,
                        closeOnCancel: false
                    }, function (isConfirm) {
                        if (isConfirm) {
                            $.ajax({
                                type: 'GET',
                                url: host + "/backend/productImageDelete/" + id + "/" + deleteid,
                                success: function (resultData) {
                                    //  alert(resultData)
                                    console.log(resultData);
                                    if (resultData == 'success') {
                                        $(thisElement).parent().hide(700);
                                        swal("Deleted!", "Your imaginary file has been deleted.", "success");
                                        // location.reload();
                                    } else {
                                        alert("Something went wrong")
                                    }
                                    // alert("Save Complete")
                                }
                            });
                            swal("Deleted!", "productImage Deleted Succesfully.", "success");


                        } else {
                            swal("Cancelled", "productImage Not Deleted)", "error");
                        }
                    });
                    return false;
                });

            },
                $.SweetAlert = new SweetAlert, $.SweetAlert.Constructor = SweetAlert;

            $.SweetAlert.init();
        });

    });
</script>
<script>
    $(document).ready(function () {
        var host = window.location.origin;
        $(function () {
            "use strict";
            var SweetAlert = function () { };

            SweetAlert.prototype.init = function () {

                //Parameter
                $('body').on('click', '.closeTrash', function (e) {
                    var deleteid = $(this).attr("data-id");
                    var id = $('#productdeleteid').val();

                    var thisElement = this;
                    swal({
                        title: "Are you sure?",
                        text: "You will not be able to recover this Project!",
                        type: "warning",
                        showCancelButton: true,
                        confirmButtonColor: "#e69a2a",
                        confirmButtonText: "Yes, delete it!",
                        cancelButtonText: "No, cancel plx!",
                        closeOnConfirm: false,
                        closeOnCancel: false
                    }, function (isConfirm) {
                        if (isConfirm) {
                            $.ajax({
                                type: 'GET',
                                url: host + "/backend/pdfDelete/" + id + "/" + deleteid,
                                success: function (resultData) {
                                    //  alert(resultData)
                                    console.log(resultData);
                                    if (resultData == 'success') {
                                        $(thisElement).parent().hide(700);
                                        swal("Deleted!", "Attachement deleted.", "success");
                                        // location.reload();
                                    } else {
                                        alert("Something went wrong")
                                    }
                                    // alert("Save Complete")
                                }
                            });
                            swal("Deleted!", "Attachement Deleted Succesfully.", "success");
                            // location.reload();

                        } else {
                            swal("Cancelled", "Attachement Not Deleted)", "error");
                        }
                    });
                    return false;
                });

            },
                $.SweetAlert = new SweetAlert, $.SweetAlert.Constructor = SweetAlert;

            $.SweetAlert.init();
        });

    });
</script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript" src="//js.nicedit.com/nicEdit-latest.js"></script>
<script type="text/javascript">

    bkLib.onDomLoaded(function () { nicEditors.allTextAreas() });
    $(document).ready(function () {
        $('#submit').click(function () {
            var edit_content = $('#formdata').find('.nicEdit-main').text();
            var new_des = $('#copyText').prop('value', edit_content);
            // console.log(edit_content);
            // alert(new_des);

        });
    });
</script>
<script>
    $(document).ready(function () {

        $('[data-id="checkone"]').on("click", function () {

            if ($(this).val() == 1) {

                $(this).attr("value", "0");
            }
            else {

                $(this).attr("value", "1");
            }

        });





        $('#product_name').keyup(function () {
            var str = $('#product_name').val();


            var spart = str.split(" ");
            for (var i = 0; i < spart.length; i++) {
                var j = spart[i].charAt(0).toUpperCase();
                spart[i] = j + spart[i].substr(1);
            }
            $('#product_name').val(spart.join(" "));

        });

        // var num = $('#product__country').val();
        // $("div#selection select#product_country option[value=" + num + "]").prop("selected", true);
        // $("div#selection select#product_country option[value=" + num + "]").prop("selected", true);


    });
</script>

<script>
    $(function () {
        $("#btnAdd").bind("click", function () {
            var div = $("<div />");
            div.html(GetDynamicTextBox(""));
            $("#TextBoxContainer").append(div);
        });
        $("#btnGet").bind("click", function () {
            var values = "";
            $("input[name=DynamicTextBox]").each(function () {
                values += $(this).val() + "\n";
            });
            alert(values);
        });
        $("body").on("click", ".remove", function () {
            $(this).closest("div").remove();
        });
    });
    function GetDynamicTextBox(value) {
        return '<div  style = "margin-top : 20px"><label class="control-label mb-10 col-sm-2 " for="product_image">Attachments</label> <div class="col-lg-6"><input style="width: 100%; padding: 5px;" type="text"  name="productPdfName" id="productPdf" placeholder="Heading"></div><div class="col-lg-3"><input style="padding: 5px;" type="hidden" id="productdeleteid"value="{{productData._id}}"><div class="upload__box"><input type="file" class="form-control"id="productAtt" name="productAtt"  value="" data-max_length="20" accept=".pdf,.csv,.xlsx,.xls"></div></div><button class="remove" > <i class="fa fa-trash ></i></button><div class="clearfix"></div></div>'
    }


    // var num = $('#product__country').val();




    // let Country = num.split(',');

    // if (Country) {


    //     Country.forEach(function (e) {
    //         $("#product_country option[value= " + e + "]").prop("selected", true);
    //     });

    // }




    var arr = $('#finalCategory').val();
    let options = arr.split(',');



    if (options != '') {

        console.log("option 1", options);


        options.forEach(function (e) {
            $("#product_category option[value=" + e + "]").prop('selected', true);
        });

    }

    var noRelatble = $('#relatable_product1').val();

    let relatable = noRelatble.split(',');


    if (relatable != '') {

        relatable.forEach(function (e) {
            $("#relatable_product option[value=" + e + "]").prop('selected', true);
        });

    }


    var noSpare = $('#spares_product1').val();

    let spare = noSpare.split(',');


    if (spare != '') {

        spare.forEach(function (e) {
            $("#spares_product option[value=" + e + "]").prop('selected', true);
        });

    }

    var num = $('#product__country').val();




    let Country = num.split(',');

    if (Country != '') {


        Country.forEach(function (e) {
            $("#product_country option[value= " + e + "]").prop("selected", true);
        });

    }



</script>

<script>

    $(document).ready(function () {


        let actual_price = $("#actual_price").val();

        // actual_price = actual_price.replace(/,/g, "");


        $("#product_price").val(actual_price);


        let actual_discount = $("#actual_discount").val()


        // actual_discount = actual_discount.replace(/,/g, "");


        $("#discount_price").val(actual_discount);

        $('[data-iid1="checkone_discount"]').on("click", function () {

            if ($(this).val() == 1) {

                $(this).attr("value", "0");
            }
            else {

                $(this).attr("value", "1");
            }

        });



        $("#product_price").keyup(function () {

            let product_price = $("#product_price").val()

            $("#selling_price").val(product_price)

            $("#discount_value").val("0")
            $("#discount_percentage").val("0")

        });


        $("#apply_discount").click(function () {

            var applyDiscount = $("#apply_discount").val()


            if (applyDiscount == 1) {

                $("#discount_value").prop('required', true);
                $("#discount_percentage").prop('required', true);

                $("#discount_value").val("0")
                $("#discount_percentage").val("0")

            } else {
                $("#discount_value").prop('required', false);
                $("#discount_percentage").prop('required', false);

                $("#discount_value").val("0")
                $("#discount_percentage").val("0")
            }

        });

        $("#discount_percentage").keyup(function () {

            let product_price = $("#product_price").val()
            // product_price =  product_price.replace(/,/g, "");


            let discount_value = $("#discount_value").val()

            let discount_percentage = $("#discount_percentage").val()
            // discount_percentage = discount_percentage.replace(/,/g, "");


            let finaValue = (product_price * discount_percentage) / 100

            let newFinalValue = (Math.round(finaValue * 100) / 100).toFixed(2);

            let disocunt_price = Math.ceil(product_price - finaValue);


            console.log("disocunt_price -- ", disocunt_price);


            $("#discount_value").val(newFinalValue)

            $("#discount_price").val(disocunt_price)


        });


        $("#discount_value").keyup(function () {

            let product_price = $("#product_price").val()

            // product_price =  product_price.replace(/,/g, "");


            let discount_percentage = $("#discount_value").val()

            // discount_percentage = discount_percentage.replace(/,/g, "");


            let finaValue = (discount_percentage * 100) / product_price

            let newFinalValue = (Math.round(finaValue * 100) / 100).toFixed(2);


            let disocunt_price = Math.ceil(product_price - discount_percentage);



            $("#discount_percentage").val(newFinalValue)

            $("#discount_price").val(disocunt_price)


        });

    });

</script>



{% endblock %}
{% extends "backend/partition/layout.html" %}

{% block body %}

<!-- Main Content -->
<div class="page-wrapper">
	<div class="container-fluid">
		<!-- Title -->
		<section class="content-header">
			<h1>Product Category Table</h1>
			<!-- Breadcrumb -->
			<ol class="breadcrumb">
				<li><a href="/"><i class="fa fa-dashboard"></i> Dashboard</a></li>
				<li class="active">Categories</li>
			</ol>
			<!-- /Breadcrumb -->
		</section>
		<!-- /Title -->
		{% include "backend/partition/notification.html" %}
		<!-- Row -->
		<section class="content">
			<div class="row">
				<div class="col-sm-12">
					<div class="panel panel-default card-view">
						<div class="panel-heading">
							<div class="pull-left">
								<h6 class="panel-title txt-dark">Sub Product Category</h6>
								

								
							</div>
							<div class="pull-right">
								
								{% if productCategory_subid %}
								<a
									href="/backend/productCategory/add_sub_productCategory/{{productCategoryId}}/{{productCategory_subid}}"><button
										type="button" class="btn btn-primary btn-md"><i class="fa fa-plus"></i> Add Sub
										Product Category</button></a>

								<a href="/backend/productCategory/list_sub_productCategory/{{productCategory_subid}}"><button type="button" class="btn btn-primary btn-md"> Back</button></a>

								{% else %}
								<a href="/backend/productCategory/add_sub_productCategory/{{productCategoryId}}"><button
										type="button" class="btn btn-primary btn-md"><i class="fa fa-plus"></i> Add Sub
										Product Category</button></a>
								<a href="/backend/productCategory"><button type="button" class="btn btn-primary btn-md">
										Back</button></a>

								{% endif %}


							</div>
							<div class="clearfix"></div>
						</div>
						<div class="panel-wrapper collapse in">
							<div class="panel-body">
								<div class="table-wrap">
									<div class="table-responsive">
										<input type="hidden" id="productCategoryId" name="productCategoryId"
											value="{{productCategoryId}}">
										<input type="hidden" id="productCategory_subid" name="productCategory_subid"
											value="{{productCategory_subid}}">
										<table id="myTable" class="table table-hover display  pb-30">
											<!-- <p>{{productCategory_subid}}</p> -->
											<thead>
												<tr>
													<th>Category Name</th>
													<!-- <th>Action</th> -->
												</tr>
											</thead>
											<tbody>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
	</div>
</div>

{% endblock %}

{% block Jscript %}
<script>
	$(document).ready(function () {
		var host = window.location.origin;
		var productCategoryId = $("#productCategoryId").attr('value');
		var productCategory_subid = $("#productCategory_subid").attr('value');
		var seturl;
		if (productCategoryId && productCategory_subid) {
			seturl = "/backend/productCategory/get_sub_productCategory/" + productCategoryId + '/' + productCategory_subid;
		} else {
			seturl = "/backend/productCategory/get_sub_productCategory/" + productCategoryId;
		}

		$('#myTable').DataTable({
			// "oLanguage": {
			// 	"sSearch": "Search Username"
			// },
			// "scrollX": true,
			"processing": true,
			"serverSide": true,
			"searching": false,
			"ordering": false,
			"autoWidth": false,
			"pageLength": 25,
			"ajax": host + seturl,
			"columns": [
				{ "data": "productCategoryName" },
				{
					"data": "action",
					render: function (data, type, row) {
					if (row.main_sub_productId != null) {
						return '<a href="/backend/productCategory/edit_sub_productCategory/' + row._id + '/' + row.main_productId + '"><button type="button" class="btn btn-warning btn-xs btn-rounded" name="edit"><i class="fa fa-edit" aria-hidden="true"></i></button></a> <button type="button" name="delete" id="/backend/productCategory/delete_sub_productCategory/' + row._id + '/' + row.main_productId + '" class="btn btn-danger btn-xs delete btn-rounded"><i class="fa fa-trash" aria-hidden="true"></i></button>'

							// return '<a href="/backend/productCategory/edit_sub_productCategory/' + row._id + '/' + row.main_productId + '"><button type="button" class="btn btn-warning btn-xs btn-rounded" name="view"><i class="fa fa-eye" aria-hidden="true"></i></button></a>'
						} else {
							// return '<a href="/backend/productCategory/list_sub_productCategory/' + row._id + '/' + row.main_productId + '"><button type="button" class="btn btn-warning btn-xs btn-rounded" name="view"><i class="fa fa-eye" aria-hidden="true"></i></button></a>'

							return '<a href="/backend/productCategory/list_sub_productCategory/' + row._id + '/' + row.main_productId + '"><button type="button" class="btn btn-warning btn-xs btn-rounded" name="view"><i class="fa fa-eye" aria-hidden="true"></i></button></a> <a href="/backend/productCategory/edit_sub_productCategory/' + row._id + '/' + row.main_productId + '"><button type="button" class="btn btn-warning btn-xs btn-rounded" name="edit"><i class="fa fa-edit" aria-hidden="true"></i></button></a> <button type="button" name="delete" id="/backend/productCategory/delete_sub_productCategory/' + row._id + '/' + row.main_productId + '" class="btn btn-danger btn-xs delete btn-rounded"><i class="fa fa-trash" aria-hidden="true"></i></button>'
						}
					}

				}
			]
		});

		$(function () {
			"use strict";

			var SweetAlert = function () { };

			SweetAlert.prototype.init = function () {

				//Parameter
				$('body').on('click', '.delete', function (e) {
					var id = $(this).attr('id');
					var thisElement = this;
					swal({
						title: "Are you sure?",
						text: "You will not be able to recover this Category!",
						type: "warning",
						showCancelButton: true,
						confirmButtonColor: "#e69a2a",
						confirmButtonText: "Yes, delete it!",
						cancelButtonText: "No, cancel plx!",
						closeOnConfirm: false,
						closeOnCancel: false
					}, function (isConfirm) {
						if (isConfirm) {
							$.ajax({
								type: 'POST',
								url: host + id,
								// data: {id: id},
								success: function (resultData) {
									// alert(resultData)
									console.log(resultData);
									if (resultData == 'success') {
										$(thisElement).parent().parent().hide(700);
										swal("Deleted!", "Your imaginary file has been deleted.", "success");
									} else {
										alert("Something went wrong")
									}
									// alert("Save Complete")
								}
							});
							swal("Deleted!", "Our Team Deleted Succesfully.", "success");
						} else {
							swal("Cancelled", "User Not Deleted)", "error");
						}
					});
					return false;
				});

			},
				$.SweetAlert = new SweetAlert, $.SweetAlert.Constructor = SweetAlert;

			$.SweetAlert.init();
		});

	});



</script>
{% endblock %}
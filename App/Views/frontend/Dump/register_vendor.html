{% extends "frontend/partitions/layout.html" %}
{% block body %}

<div class="main-content main-content-login">

  <div class="success_alert">{% include "frontend/partitions/notification.html" %}</div>  

    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="breadcrumb-trail breadcrumbs">
                    <ul class="trail-items breadcrumb">
                        <li class="trail-item trail-begin">
                            <a href="/">Home</a>
                        </li>
                        <li class="trail-item trail-end active">
                            Authentication
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="content-area col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="site-main">
                    <h3 class="custom_blog_title">
                        Authentication
                    </h3>


                    <div class="customer_login">
                        <div class="row">
                            <div class="col-lg-6 col-md-6 col-sm-12">
                                <div class="login-item">
                                    <h5 class="title-login">Login your Account</h5>
                                    <form id="loginSubmit" class="login" action="/loginPost__vendor" method="post">

                                        <p class="form-row form-row-wide">
                                            <label class="text">Username</label>
                                            <input title="username" name="vendor_email" type="email" class="input-text"
                                                required>
                                        </p>
                                        <p class="form-row form-row-wide">
                                            <label class="text">Password</label>
                                            <input title="password" name="vendor_password" minlength="6" maxlength="6" type="password"
                                                class="input-text" required>
                                        </p>
                                        <p class="lost_password">
                                            <span class="inline">
                                                <input type="checkbox" name="rememberMe" id="cb1">
                                                <label for="cb1" class="label-text">Remember me</label>
                                            </span>
                                            <a href="#" class="forgot-pw">Forgot password?</a>
                                        </p>
                                        <p class="form-row">
                                            <input type="submit" class="button-submit" value="login">
                                        </p>
                                    </form>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-12">
                                <div class="login-item">
                                    <h5 class="title-login">Register now</h5>
                                    <form class="register" id="registerSubmit" action="/registerVendor" method="post"
                                        enctype="multipart/form-data">

                                        <div class="vendor_gstbtn form-row-wide">

                                            <div class="text ">GST</div>
                                            <div>

                                                <label class="switch_vendorGst">
                                                    <input name="gstSwitch" class="gstSwitch" type="checkbox"
                                                        id="switchVal" value="0" hidden>
                                                    <span class="slider_vendorGst round"></span>
                                                </label>
                                            </div>
                                        </div>

                                        {% if role %}

                                        <span id="gst_invalid" class="hidden  mob-helpers">
                                            Please enter valid Gst number.
                                        </span>
                                        <div class="gst_invlidmsg"> </div>
                                        <p class="form-row Gst_Hide form-row-wide">
                                            <label class="text">GST Number</label>
                                            <input title="gst_number" name="gst_No" id="vendor_gstNo" maxlength="15"
                                                type="text" class="input_Gst" required>
                                        </p>
                                        {% endif %}


                                        <p class="form-row form-row-wide">
                                            <label class="text">Company</label>
                                            <input title="name" name="companyName" value="" id="vendor_Company"
                                                type="text" class="input-text" required>
                                        </p>

                                        <p class="form-row form-row-wide">
                                            <label class="text">Email</label>
                                            <input title="email" name="email" type="email" class="input-text" required>
                                        </p>
                                        <p>
                                            <span id="mobile-valid" class="hidden mob">

                                            </span>
                                            <span id="folio-invalid" class="hidden  mob-helpers">
                                                Please enter valid mobile No
                                            </span>
                                        </p>
                                        <p class="form-row form-row-wide">
                                            <label class="text">Mobile </label>
                                            <input title="Mobile" name="phone" id="mobile-num" type="text"
                                                class="input-text" maxlength="10" required>
                                        </p>

                                        <p class="form-row form-row-wide">
                                            <label for="myfile">Select a file:</label>
                                            <input type="file" id="kycImage" name="kycImage"
                                                accept="image/x-png,image/gif,image/jpeg,.pdf" required>
                                        </p>

                                        <p class="form-row">
                                            <span class="inline">
                                                <input type="checkbox" name="term_and_condition" id="cb2">
                                                <label for="cb2" class="label-text">I agree to <span>Terms &
                                                        Conditions</span></label>
                                            </span>
                                        </p>

                                        <p class="">
                                            <input type="submit" class="button-submit" value="Register Now">
                                        </p>

                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block Jscript %}
<script>

    $(document).ready(function () {

        $(".Gst_Hide").hide();
        $('#switchVal').click(function () {
            $('.Gst_Hide').toggle();
        });
    });

    var companyName;
    $("#vendor_gstNo").keyup(function (e) {
        var gstValue = $("#vendor_gstNo").val();
        $('.gst_invlidmsg').html('');
        // console.log(gstValue, "fsfuwehfuwehf");

        e.preventDefault()
        if ($(this).val().length == 15) {
            $.ajax({
                url: "/validationGst",
                type: "POST",
                dataType: "json",
                data: { gstValue },
                success: function (result) {
                    companyName = result.data.tradename;
                    $(".gst_invlidmsg").html(result.data);
                    // console.log("result", result.data);
                    $("#vendor_Company").attr('value', result.data.tradename);
                    $("#vendor_Company").val(result.data.tradename);
                },
                error() {
                    console.log("error");
                }
            })
        } else {
            // Disable submit button
        }
    });

    $("#registerSubmit").on("submit", function () {
        $("#vendor_Company").removeAttr("disabled"); 
        var form = $('form').serialize();
        $('input[disabled]').each(function () {
            form = form + '&' + $(this).attr('name') + '=' + $(this).val();
        });
        $.ajax({
            type: "POST",
            dataType: "json",
            data: $("#registerSubmit").serialize(),
        })
    });

    $("#switchVal").on("click", function () {
        if ($("#switchVal").val() == 0) {
            $("#switchVal").val(1);
        }
        else {
            $("#switchVal").val(0);
        }
        // alert($("#switchVal").val());
        var toggle = $("#vendor_Company").prop("disabled");
        $("#gst_invalid").addClass("hidden");
        $("#vendor_Company").prop("disabled", !toggle);

        $(':input[type="submit"]').prop('', false);
        $("#vendor_Company").val("");

    });
   
</script>
<script>
    $(document).ready(function () {

        $("#mobile-num").keyup(function () {
            var mobNum = $(this).val();
            var filter = /^\d*(?:\.\d{1,2})?$/;

            if (filter.test(mobNum)) {
                if (mobNum.length == 10) {
                    // alert("valid");
                    $("#mobile-valid").removeClass("hidden");
                    $("#folio-invalid").addClass("hidden");
                } else {
                    //   alert('Please put 10  digit mobile number');
                    $("#folio-invalid").removeClass("hidden");
                    $("#mobile-valid").addClass("hidden");
                    return false;
                }
            }
            else {
                // alert('Not a valid number');
                $("#folio-invalid").removeClass("hidden");
                $("#mobile-valid").addClass("hidden");
                return false;
            }

        });

        $("#vendor_gstNo").keyup(function () {
            var gstNum = $(this).val();
            if (gstNum.length == 15) {

                $("#mobile-valid").removeClass("hidden");
                $("#gst_invalid").addClass("hidden");
            } else {

                $("#gst_invalid").removeClass("hidden");
                $("#mobile-valid").addClass("hidden");
                return false;
            }

        });
    });
</script>

{% endblock %}